<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
    <table name="w4plego_integrations" resource="default" engine="innodb" comment="Integrations Table">
        <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true" comment="ID"/>
        <column xsi:type="varchar" name="integration_name" nullable="false" length="255" default="0" comment="Integration Name"/>
        <column xsi:type="varchar" name="process_class" nullable="false" length="255" comment="Process Class"/>
        <column xsi:type="varchar" name="process_code" nullable="false" length="255" comment="Process Code"/>
        <column xsi:type="varchar" name="status" nullable="false" length="25" comment="Status"/>
        <column xsi:type="boolean" name="cron_enable" nullable="false" default="0" comment="Enable Cron"/>
        <column xsi:type="varchar" name="schedule_hour" nullable="true" length="60" comment="Schedule Hour"/>
        <column xsi:type="varchar" name="schedule_min" nullable="true" length="60" comment="Schedule Minute"/>
        <column xsi:type="varchar" name="frequency" length="10" nullable="true" comment="Schedule Frequency"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="id"/>
        </constraint>
        <constraint xsi:type="unique" referenceId="W4PLEGO_INTEGRATIONS_PROCESS_CODE">
            <column name="process_code"/>
        </constraint>
    </table>
    <table name="w4plego_integrations_cron_schedule" resource="default" engine="innodb" comment="Integrations Cron Schedule Table">
        <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true" comment="ID"/>
        <column xsi:type="int" name="integration_id" padding="10" unsigned="true" nullable="false" comment="Integration ID"/>
        <column xsi:type="varchar" name="integration_name" nullable="false" length="255" default="0" comment="Integration Name"/>
        <column xsi:type="varchar" name="process_code" nullable="false" length="255" comment="Process Code"/>
        <column xsi:type="varchar" name="schedule_status" nullable="false" length="25" comment="Schedule Status"/>
        <column xsi:type="timestamp" name="created_at" on_update="false" nullable="false" default="CURRENT_TIMESTAMP" comment="Creation Schedule Time"/>
        <column xsi:type="timestamp" name="updated_at" on_update="true" nullable="false" default="CURRENT_TIMESTAMP" comment="Updated Schedule Time"/>
        <column xsi:type="timestamp" name="start_run_time" on_update="false" nullable="true" default="NULL" comment="Start Time"/>
        <column xsi:type="timestamp" name="finish_run_time" on_update="false" nullable="true" default="NULL" comment="Finish Time"/>
        <column xsi:type="timestamp" name="schedule_time" on_update="false" nullable="true" default="NULL" comment="Schedule Time"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="id"/>
        </constraint>
        <constraint xsi:type="foreign" referenceId="W4PLEGO_INTEGRATIONS_CRON_SCHEDULE_INTEGRATION_ID_W4PLEGO_INTEGRATIONS_ID"
                    table="w4plego_integrations_cron_schedule" column="integration_id" referenceTable="w4plego_integrations"
                    referenceColumn="id" onDelete="CASCADE"
        />
    </table>
</schema>
